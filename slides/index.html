<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- <link rel="icon" type="image/svg+xml" href="/vite.svg" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fagkveld i Go</title>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Fagkveld i Go</h1>
          <pre>
            <code data-trim data-noescape class="language-golang">
              func main() {
                  fmt.Println("Hello, world!")
              }
            </code>
          </pre>
        </section>

        <section>
          <h2>Agenda</h2>
          <ul>
            <li>Intro</li>
            <li>Liten gjennomgang av språket</li>
            <li>Hva <i>kan</i> vi gjøre i Go?</li>
            <li>Når <i>bør</i> vi bruke Go?</li>
            <hr />
            <li>Oppsett av Go</li>
            <li>Ressurser</li>
          </ul>
        </section>

        <section>
          <h2>Intro</h2>
          <section>
            <ul>
              <li>Startet hos Google av Robert Griesemer, Rob Pike og Ken Thompson</li>
              <li>Design påbegynt 2007, annonsert offentlig 2009, v1.0 i 2012</li>
              <li>Go er
                <ul>
                  <li>statically typed</li> <!-- check -->
                  <li>simple/easy to learn</li> <!-- check -->
                  <li>built for concurrency</li> <!-- TODO -->
                  <li>simple to deploy</li> <!-- TODO, docker -->
                </ul>
              </li>
            </ul>
          </section>
        </section>

        <!-- GJENNOMGANG -->
        <section>
          <h3>Liten gjennomgang...</h3>
        </section>

        <section>
          <h3>Type-system</h3>
          <section>
            <p>Funskjoner</p>
            <pre>
              <code data-trim data-noescape data-line-numbers class="language-golang">
                func add(a int, b int) int {
                    return a + b
                }
              </code>
            </pre>
          </section>
          <section>
            <p>Structs</p>
            <pre>
              <code data-trim data-noescape data-line-numbers class="language-golang">
                type operation struct {
                    a int
                    b int
                }
              </code>
            </pre>
          </section>
          <section>
            <p>Constructor finnes ikke</p>
            <pre>
              <code data-trim data-noescape data-line-numbers class="language-golang">
                func newOperation(a int, b int) *operation {
                    return &operation{
                        a: a,
                        b: b,
                    }
                }
              </code>
            </pre>
            <p class="small">* = pointer</p>
            <p class="small">& = ta referanse</p>
          </section>
          <section>
            <p>camelCase = unexported</p>
            <pre>
              <code data-trim data-noescape data-line-numbers="1" class="language-golang">
                func newOperation(a int, b int) *operation {
                    return &operation{
                        a: a,
                        b: b,
                    }
                }
              </code>
            </pre>
            <p class="small">Unexported = kan bare brukes <b>internt</b> i en <b>package</b></p>
          </section>
          <section>
            <p>PascalCase = exported</p>
            <pre>
              <code data-trim data-noescape data-line-numbers="1" class="language-golang">
                func NewOperation(a int, b int) *operation {
                    return &operation{
                        a: a,
                        b: b,
                    }
                }
              </code>
            </pre>
            <p class="small">Exported = kan brukes av <b>eksterne</b> <b>packages</b></p>
          </section>
          <section>
            <p>Unexported struct, exported functions</p>
            <pre>
              <code data-trim data-noescape data-line-numbers="1,13" class="language-golang">
                type operation struct {
                    a int
                    b int
                }

                func NewOperation(a int, b int) *operation {
                    return &operation{
                        a: a,
                        b: b,
                    }
                }

                func (o *operation) Add() int {
                    return o.a + o.b
                }
              </code>
            </pre>
            <p class="small"><b><code>operation.Add</code></b> kan brukes av eksterne, men feltene er skjulte</p>
          </section>
          <section>
            <p>Pointer receivers</p>
            <pre>
              <code data-trim data-noescape data-line-numbers="8" class="language-golang">
                func NewOperation(a int, b int) *operation {
                    return &operation{
                        a: a,
                        b: b,
                    }
                }

                func (o *operation) Add() int {
                    return o.a + o.b
                }
              </code>
            </pre>
            <p class="small"><b><code>(o *operation)</code></b> kalles en <b>pointer</b> receiver</p>
          </section>
          <section>
            <p>Value receivers</p>
            <pre>
              <code data-trim data-noescape data-line-numbers="8" class="language-golang">
                func NewOperation(a int, b int) *operation {
                    return &operation{
                        a: a,
                        b: b,
                    }
                }

                func (o operation) Add() int {
                    return o.a + o.b
                }
              </code>
            </pre>
            <p class="small"><b><code>(o operation)</code></b> kalles en <b>value</b> receiver</p>
            <p class="small"><b><code>Add</code></b> vil få en <b>kopi</b> av en <b><code>operation</code></b></p>
          </section>
          <section>
            <p>Interfaces</p>
            <pre class="sm">
              <code data-trim data-noescape data-line-numbers="1-6|8-13|15-23|*" class="language-golang">
                type Addition interface {
                    Add() int
                }
                type Subtraction interface {
                    Subtract() int
                }

                func (o *operation) Add() int {
                    return o.a + o.b
                }
                func (o *operation) Subtract() int {
                    return o.a - o.b
                }
                // --------------------------------
                // En annen package
                func main() {
                    op := interfaces.NewOperation(2, 1) // *operation
                    ComputeSumAndDiff(op, op)
                }

                // Interface type arguments er alltid pointers
                func ComputeSumAndDiff(o1 interfaces.Addition, o2 interfaces.Subtraction) (int, int) {
                    return o1.Add(), o2.Subtract()
                }
              </code>
            </pre>
            <p class="small">Implementasjon av interface er <b>implisitt</b></p>
          </section>
          <section>
            <p>Explicit interface implementasjon?</p>
            <pre class="sm">
              <code data-trim data-noescape data-line-numbers="15,16" class="language-golang">
                type Addition interface {
                    Add() int
                }
                type Subtraction interface {
                    Subtract() int
                }

                func (o *operation) Add() int {
                    return o.a + o.b
                }
                func (o *operation) Subtract() int {
                    return o.a - o.b
                }

                var _ Addition = (*operation)(nil)
                var _ Subtraction = (*operation)(nil)
              </code>
            </pre>
            <p class="small">Variabel i globalt scope med discard får compileren til å verifisere interface implementasjon</p>
          </section>
          <section>
            <p>Generics</p>
            <pre class="sm">
              <code data-trim data-noescape data-line-numbers class="language-golang">
                // This package is 0.0.0 - experimental
                import "golang.org/x/exp/constraints"

                type Number interface {
                    constraints.Integer | constraints.Float
                }

                type operation[T Number] struct {
                    a T
                    b T
                }

                func NewOperation[T Number](a T, b T) *operation[T] {
                    return &operation[T]{
                        a: a,
                        b: b,
                    }
                }
              </code>
            </pre>
            <p class="small">Generics ble introdusert i Go <b>1.18</b></p>
          </section>
          <section>
            <p>Generics</p>
            <pre class="sm">
              <code data-trim data-noescape data-line-numbers data-ln-start-from="19" class="language-golang">
                // ...

                type Addition[T Number] interface {
                    Add() T
                }
                type Subtraction[T Number] interface {
                    Subtract() T
                }

                func (o *operation[T]) Add() T {
                    return o.a + o.b
                }
                func (o *operation[T]) Subtract() T {
                    return o.a - o.b
                }

                var _ Addition[int] = (*operation[int])(nil)
                var _ Subtraction[int] = (*operation[int])(nil)
              </code>
            </pre>
          </section>
          <section>
            <p>Generics</p>
            <pre class="sm">
              <code data-trim data-noescape data-line-numbers class="language-golang">
                // ...
                // --------------------------------
                // En annen package
                func main() {
                    op := generics.NewOperation(2, 1) // *operation
                    ComputeSumAndDiff[int](op)        // second type parameter is inferred
                }

                // Addition og Subtraction blir "embedded" i AdditionAndSubtraction
                type AdditionAndSubtraction[T generics.Number] interface {
                    generics.Addition[T]
                    generics.Subtraction[T]
                }

                func ComputeSumAndDiff[T generics.Number, O AdditionAndSubtraction[T]](o O) (T, T) {
                    return o.Add(), o.Subtract()
                }
              </code>
            </pre>
            <p class="small">I motsetning til C#, kan compileren gjør delvis inference av generic type parameters</p>
          </section>
          <!-- Concurrency -->
          <section>
            <h2>Andre ting?</h2>
          </section>
        </section>
        <section>
          <h3>Runtime</h3>
        </section>
        <section>
          <h3>Deployment</h3>
        </section>
        <!-- /GJENNOMGANG -->

        <section>
          <h2>Hva <i>kan</i> vi gjøre i Go?</h2>
        </section>
        <section>
          <h3>CLI med <a href="https://github.com/charmbracelet/bubbletea" target="_blank">bubbletea</a></h3> <!-- TODO fix link -->
          <section>
            <div class="r-stack">
              <img class="fragment fade-in-then-out" src="https://github.com/charmbracelet/bubbletea/raw/master/examples/chat/chat.gif" />
              <img class="fragment fade-in-then-out" src="https://github.com/charmbracelet/bubbletea/raw/master/examples/package-manager/package-manager.gif" />
              <img class="fragment fade-in" src="https://github.com/charmbracelet/bubbletea/raw/master/examples/list-fancy/list-fancy.gif" />
            </div>
            <p class="fragment fade-up">Lightweight, statically linked binaries</p>
            <p class="fragment fade-up">Fast startup</p>
          </section>
        </section>
        <section>
          <h3>Embedded + WASM med <a href="https://tinygo.org/" target="_blank">TinyGo</a></h3> <!-- TODO fix link -->
          <section>
          </section>
        </section>
        <section>
          <h3>APIer, backend development</h3>
          <section>
          </section>
        </section>
        <section>
          <section>
            <img src="cncf.png" />
            <h3 class="fragment fade-up">DevOps, cloud native tooling</h3>
          </section>
        </section>
        <section>
          <h3>Databaser</h3>
          <section>
            <ul>
              <li><a href="https://grafana.com/go/webinar/getting-started-with-grafana-lgtm-stack/" target="_blank">Grafana LGTM stack</a></li>
              <li><a href="https://github.com/dgraph-io/badger" target="_blank">Badger KV DB</a></li>
              <li><a href="https://github.com/hashicorp/memberlist" target="_blank">Memberlist - gossip protocol</a></li>
            </ul>
          </section>
        </section>


        <section>
          <h2>Når <i>bør</i> vi bruke Go?</h2>
          <section>
            <h3>Cloud-native</h3>
            <ul>
              <li>Platform-teams</li>
              <li>DevOps</li>
              <li>SRE</li>
              <li>Alt som er tett på containere, k8s</li>
            </ul>
            <p class="fragment fade-up">MEN - WASM anses av mange som "fremtiden", her er det mye Rust</p>
          </section>
          <section>
            <h3>Microservices, backend?</h3>
            <ul>
              <li>Bare min mening</li>
              <li>Ja, hvis
                <ul>
                  <li>greenfield</li>
                  <li>masse tid og peng til rekruttering</li>
                </ul>
              </li>
              <li>Bra runtime, shit typesystem <span style="opacity: 0.6">(til å være et relativt nytt språk)</span></li>
            </ul>
          </section>
        </section>

        <section>
          <h2>Oppsett av go</h2>
          <section>
            <ul>
              <li>Bruk Linux/Mac (jeg bruker WSL2 Ubuntu) og VSCode</li>
              <li>Installer <a href="https://github.com/moovweb/gvm#installing" target="_blank">gvm</a></li>
              <li>Installer Go v1.20</li>
              <li>Installer VSCode extension for Go</li>
              <li>Github Copilot</li>
            </ul>
            <pre>
              <code data-noescape class="language-bash">git clone git@github.com:Forse/fagkveld-go.git</code>
            </pre>
          </section>
        </section>
        <section>
          <h2>Ressurser</h2>
          <section>
            <ul>
              <li><a href="https://github.com/golang-standards/project-layout">Project layout</a> - "best practices" projectoppsett</li>
              <li><a href="https://go.dev/learn/">Get Started</a> - go.dev offisiell ressurs</li>
              <li><a href="https://gobyexample.com/">Go by Example</a> - eksempelbasert læring</li>
              <li><a href="https://exercism.org/tracks/go">Go - Exercism</a> - exercism track med 140 oppgaver (interaktivt)</li>
            </ul>
          </section>
        </section>
        <section>
          <h2>Referanser</h2>
          <section>
            <ul>
              <li><a href="https://planetscale.com/blog/generics-can-make-your-go-code-slower">Generics can make your Go code slower</a></li>
            </ul>
          </section>
        </section>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
